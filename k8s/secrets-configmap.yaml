apiVersion: v1
kind: Secret
metadata:
  name: ve-secrets
  namespace: ve-saas
type: Opaque
stringData:
  # Supabase
  supabase-url: "REPLACE_WITH_ACTUAL_URL"
  supabase-service-key: "REPLACE_WITH_ACTUAL_KEY"
  supabase-anon-key: "REPLACE_WITH_ACTUAL_KEY"
  
  # Redis
  redis-url: "redis://redis:6379"
  
  # Temporal
  temporal-host: "temporal-frontend.temporal:7233"
  temporal-namespace: "ve-saas"
  
  # OpenObserve
  openobserve-otlp-endpoint: "http://openobserve:5080"
  openobserve-auth-token: "REPLACE_WITH_BASE64_ENCODED_USER_PASSWORD"
  openobserve-org: "default"
  
  # Agent Gateway
  agent-gateway-url: "http://agent-gateway:8080"
  agent-gateway-api-key: "REPLACE_WITH_ACTUAL_KEY"
  
  # Centrifugo
  centrifugo-api-url: "http://centrifugo:8000/api"
  centrifugo-api-key: "REPLACE_WITH_ACTUAL_KEY"
  
  # LLM API Keys (for agent decision-making)
  openai-api-key: "REPLACE_WITH_ACTUAL_KEY"
  anthropic-api-key: "REPLACE_WITH_ACTUAL_KEY"
  
  # JWT Secret
  jwt-secret: "REPLACE_WITH_RANDOM_SECRET"
  
  # Environment
  environment: "production"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: temporal-worker-config
  namespace: ve-saas
data:
  # Circuit Breaker Configuration
  DELEGATION_MAX_DEPTH: "5"
  DELEGATION_MAX_CUSTOMER_RATE: "100"  # Per hour
  DELEGATION_MAX_AGENT_RATE: "50"  # Per agent per hour
  
  # Tracing Configuration
  ENABLE_TRACING: "true"
  TRACE_SAMPLE_RATE: "1.0"  # 100% sampling for delegation visibility
  
  # Worker Configuration
  WORKER_MAX_CONCURRENT_ACTIVITIES: "100"
  WORKER_MAX_CONCURRENT_WORKFLOWS: "50"
  WORKER_TASK_QUEUE: "campaign-queue"
  
  # Timeout Configuration
  ACTIVITY_START_TO_CLOSE_TIMEOUT: "600"  # 10 minutes
  WORKFLOW_EXECUTION_TIMEOUT: "86400"  # 24 hours
  
  # Retry Configuration
  ACTIVITY_MAX_ATTEMPTS: "3"
  WORKFLOW_MAX_ATTEMPTS: "2"
  
  # Performance Tuning
  WORKER_STICKY_SCHEDULE_TO_START_TIMEOUT: "5"
  WORKER_MAX_CACHED_WORKFLOWS: "1000"
